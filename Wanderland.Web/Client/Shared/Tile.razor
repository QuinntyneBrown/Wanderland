@using Wanderland.Web.Shared
@inject Wanderland.Web.Shared.IWanderlandHttpApiClient _apiClient

<MudPaper Height="80px" Width="80px" Style='@($"background:{Colors.BlueGrey.Default}")'>@($"Row: {Row}, Column: {Column}, Type: {TileType}")</MudPaper>

@code {
    [Parameter]
    public int Row { get; set; }

    [Parameter]
    public int Column { get; set; }

    [Parameter]
    public string? WorldName { get; set; }

    private TileType TileType;
    private bool shouldRender = false;

    protected override bool ShouldRender() => shouldRender;

    protected override async Task OnParametersSetAsync()
    {
        if (!string.IsNullOrEmpty(WorldName))
        {
            var tile = await _apiClient.GetTileCurrentState(WorldName, Row, Column);
            TileType = tile.Type;
            shouldRender = true;
        }
    }
}
